
function generateUniqueId(){let o="";for(let e=0;e<10;e++)o+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(62*Math.random()));return o}function waitForElement(n,t=1e4){return new Promise((o,r)=>{let d=0;const a=setInterval(()=>{var e=document.querySelector(n);e?(clearInterval(a),o(e)):d>t&&(clearInterval(a),r("Element not found: "+n)),d+=100},100)})}function delay(o){return new Promise(e=>setTimeout(e,o))}async function typeCouponAnimation(o,r){for(let e=0;e<o.code.length;e++)r.value=o.code.substring(0,e+1),await delay(100)}function checkForErrorMessage(){var e;for(e of["#addGiftCardOrPromo_Unknown","#addGiftCardOrPromo_NoCode","#addPromo_InvalidForPurchase","#addPromo_BadCode","#addPromo_ExpiredCode","#addPromo_InvalidForOrgUnit","#addPromo_OfferNotYetBegun","#addPromo_AlreadyRedeemed","#addGiftCard_AlreadyRedeemedByAnotherAccount","#addGiftCard_AlreadyRedeemedByThisAccount","#addGiftCard_BadCode","#addGiftCard_ExpiredCode","#addGiftCard_Cancelled","#addGiftCard_WrongOrgUnit","#addGiftCard_ServiceDown","#addGiftCard_Disabled","#addGiftCard_Teen_Disabled","#addGiftCard_PayAgent_Disabled","#addGiftCard_PayOnPickup_Disabled","#addGiftCard_OTP_Required","#addGiftCard_SEVIS_Decline","#addGiftCard_OCRAH_Decline","#addGiftCard_DEFAULT_Message",".promoErrorTip",".errorStatus","#redemptionCode-error"]){var o=document.querySelector(e);if(o&&"block"===o.style.display)return!1}return!0}async function applyCouponsWithAnimation(e,o,r,d){if(o>=e.length)console.log("All coupons have been tried.");else try{var a=e[o],n=(console.log("Trying coupon: "+a.code),await waitForElement(r));return n.value="",await typeCouponAnimation(a,n),insertCouponCode(n),(await waitForElement(d)).click(),await delay(2e3),checkForErrorMessage()?(console.log(`Coupon ${a.code} is invalid. Trying next coupon.`),!1):(console.log(`Coupon ${a.code} applied successfully or no errors found.`),!0)}catch(e){return console.error("Error applying coupon:",e),!1}}function insertCouponCode(e){var o=new Event("input",{bubbles:!0}),o=(e.dispatchEvent(o),new Event("change",{bubbles:!0})),o=(e.dispatchEvent(o),new KeyboardEvent("keyup",{bubbles:!0,key:"Enter",code:"Enter"}));e.dispatchEvent(o)}